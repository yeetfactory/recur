appId: com.yeetfactory.recur
---
# ─── Launch with clean state ───
- launchApp:
    clearState: true
- extendedWaitUntil:
    visible:
      id: 'onboarding-start'
    timeout: 20000

# ─── Welcome screen assertions ───
- assertVisible: 'Recur.'
- assertVisible: 'Take control of your'

# ─── Tap "Let's get started" ───
- tapOn:
    id: 'onboarding-start'

# ─── Details screen: enter name ───
- extendedWaitUntil:
    visible:
      id: 'onboarding-name-input'
    timeout: 10000
- tapOn:
    id: 'onboarding-name-input'
- inputText: 'Alex'

# ─── Details screen: select currency ───
- tapOn:
    id: 'onboarding-currency-trigger'
- extendedWaitUntil:
    visible:
      id: 'onboarding-currency-search'
    timeout: 10000
- tapOn:
    id: 'onboarding-currency-search'
- eraseText: 10
- inputText: 'INR'
- extendedWaitUntil:
    visible:
      id: 'currency-option-INR'
    timeout: 15000
- tapOn:
    id: 'currency-option-INR'

# ─── Retry currency selection if dialog still visible ───
- runFlow:
    when:
      visible:
        id: 'onboarding-currency-search'
    commands:
      - tapOn:
          id: 'currency-option-INR'
- runFlow:
    when:
      visible:
        id: 'onboarding-currency-search'
    commands:
      - back

# ─── Verify currency was selected ───
- extendedWaitUntil:
    visible:
      id: 'onboarding-continue'
    timeout: 10000
- assertVisible: 'INR'

# ─── Tap Continue ───
- tapOn:
    id: 'onboarding-continue'
- runFlow:
    when:
      visible:
        id: 'onboarding-continue'
    commands:
      - tapOn:
          id: 'onboarding-continue'

# ─── Terms screen: verify terms page loads ───
- extendedWaitUntil:
    visible:
      id: 'onboarding-accept-terms'
    timeout: 10000
- assertVisible: 'Almost there!'

# ─── Read Terms & Conditions ───
- tapOn:
    id: 'onboarding-open-terms-link'
- extendedWaitUntil:
    visible: 'Terms & Conditions'
    timeout: 10000
- assertVisible: 'Terms & Conditions'
- tapOn:
    id: 'policy-back'

# ─── Read Privacy Policy ───
- extendedWaitUntil:
    visible:
      id: 'onboarding-open-privacy-link'
    timeout: 10000
- tapOn:
    id: 'onboarding-open-privacy-link'
- extendedWaitUntil:
    visible: 'Privacy Policy'
    timeout: 10000
- assertVisible: 'Privacy Policy'
- tapOn:
    id: 'policy-back'

# ─── Accept terms and privacy ───
- extendedWaitUntil:
    visible:
      id: 'onboarding-accept-terms'
    timeout: 10000
- tapOn:
    id: 'onboarding-accept-terms'
- tapOn:
    id: 'onboarding-accept-privacy'

# ─── Tap Get Started ───
- tapOn:
    id: 'onboarding-get-started'
- runFlow:
    when:
      visible:
        id: 'onboarding-get-started'
    commands:
      - tapOn:
          id: 'onboarding-get-started'

# ─── Verify we landed on the dashboard ───
- extendedWaitUntil:
    visible:
      id: 'add-subscription-open'
    timeout: 20000
- assertVisible: 'No subscriptions yet.'
- assertVisible: 'Alex'
