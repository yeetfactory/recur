appId: com.yeetfactory.recur
---
# ─── Pre-condition: we should be on the home tab after onboarding ───
- launchApp
- runFlow:
    when:
      visible:
        id: "onboarding-start"
    file: onboarding.yaml

# ─── Verify dashboard elements ───
- extendedWaitUntil:
    visible:
      id: "add-subscription-open"
    timeout: 15000
- assertVisible: "Alex"
- assertVisible: "Total Spending"
- assertVisible: "₹0.00"

# ─── Verify view mode toggle ───
- assertVisible:
    id: "view-mode-monthly"
- assertVisible:
    id: "view-mode-yearly"

# ─── Toggle to yearly and back ───
- tapOn:
    id: "view-mode-yearly"
- assertVisible: "₹0.00"
- tapOn:
    id: "view-mode-monthly"

# ─── Verify empty state message ───
- assertVisible: "No subscriptions yet."

# ─── Navigate to settings ───
- tapOn:
    id: "tab-settings"
- extendedWaitUntil:
    visible: "Settings"
    timeout: 10000
- assertVisible: "Settings"
- assertVisible:
    id: "settings-manage-lists"
- assertVisible:
    id: "settings-theme-toggle"

# ─── Verify profile card shows user info ───
- assertVisible: "Alex"
- assertVisible: "INR"

# ─── Navigate back to home ───
- tapOn:
    id: "tab-home"
- extendedWaitUntil:
    visible:
      id: "add-subscription-open"
    timeout: 10000
