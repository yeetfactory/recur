appId: com.yeetfactory.recur
---
# ═══════════════════════════════════════════════════════
# Phase 1: Verify app survives a cold restart
# ═══════════════════════════════════════════════════════

- killApp
- launchApp

# ─── Should NOT show onboarding ───
- assertNotVisible:
    id: "onboarding-start"

# ─── Should land on the dashboard ───
- extendedWaitUntil:
    visible:
      id: "add-subscription-open"
    timeout: 20000
- assertVisible:
    id: "add-subscription-open"

# ─── Username should persist ───
- assertVisible: "Alex"

# ─── Should show empty state (since subscriptions were deleted) ───
- assertVisible: "No subscriptions yet."

# ═══════════════════════════════════════════════════════
# Phase 2: Create data, kill, and verify it persists
# ═══════════════════════════════════════════════════════

# ─── Create a subscription ───
- tapOn:
    id: "add-subscription-open"
- extendedWaitUntil:
    visible:
      id: "add-subscription-name-input"
    timeout: 10000
- tapOn:
    id: "add-subscription-name-input"
- inputText: "YouTube"
- tapOn:
    id: "add-subscription-amount-input"
- inputText: "14"
- tapOn:
    id: "add-subscription-save"
- runFlow:
    when:
      visible:
        id: "add-subscription-save"
    commands:
      - tapOn:
          id: "add-subscription-save"
- extendedWaitUntil:
    visible: "YouTube"
    timeout: 15000
- assertVisible: "₹14.00"

# ─── Kill and relaunch ───
- killApp
- launchApp

# ─── Verify data survived the restart ───
- extendedWaitUntil:
    visible: "YouTube"
    timeout: 20000
- assertVisible: "YouTube"
- assertVisible: "₹14.00"
- assertVisible: "Alex"

# ─── Clean up: delete the test subscription ───
- tapOn:
    id: "subscription-youtube-delete"
- extendedWaitUntil:
    visible:
      id: "subscription-delete-confirm"
    timeout: 10000
- tapOn:
    id: "subscription-delete-confirm"
- extendedWaitUntil:
    visible: "No subscriptions yet."
    timeout: 10000
